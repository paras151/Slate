"use strict";function ReactiveHbs(a){this.setOptions(a)}ReactiveHbs.prototype.setOptions=function(a){if("undefined"==typeof a)throw new Error("options params is not provided");if("undefined"==typeof a.container)throw new Error("to initialise an ReactiveHbs a container to mount template on is necessary ");if("undefined"==typeof a.template)throw new Error("to initialise an ReactiveHbs a template is necessary ");this.options=a,this.options.template=Handlebars.compile($(this.options.template).html()),this.containerSelector=this.options.container,this.options.container=$(this.options.container),this.options.helpers=null,this.reactive={},this.renderCallback=null,this.tplPromises={}},ReactiveHbs.prototype.helpers=function(a){return"object"!=typeof a?console.error(" helper function should be initialised with object "):void(this.options.helpers=$.extend({},Handlebars.helpers,a))},ReactiveHbs.prototype.events=function(a){if("object"!=typeof a)return console.error(" events function should be initialised with object ");var b=this;_.each(a,function(a,c){var d=c.substr(0,c.indexOf(" ")),e=c.substr(c.indexOf(" ")+1);$(b.containerSelector).on(d,e,function(c){a&&a(c,this,b)})})},ReactiveHbs.prototype.render=function(a){var b=this.options.data||null,c=this.options.helpers||null;this.options.container.empty(),this.options.container.html(this.options.template(b,{helpers:c})),this.renderCallback&&this.renderCallback(this),a&&a()},ReactiveHbs.prototype.onRendered=function(a){if("function"!=typeof a)throw new Error("provide a callback function to on Rendered");this.renderCallback=a},ReactiveHbs.prototype.get=function(a){return"string"!=typeof a?console.error("parameter to get should be a string "):_.get(this.options.data,a)},ReactiveHbs.prototype.push=function(a,b,c){if("string"!=typeof a)return console.error("parameter to push value in should be a string ");if("undefined"==typeof b)return console.error("value should be there to push ");var d=_.get(this.options.data,a);return _.isArray(d)?(d.push(b),this.render(),void(c&&c())):console.error("values can only be pushed in array")},ReactiveHbs.prototype.pop=function(a,b,c){if("string"!=typeof a)return console.error("parameter to push value in should be a string ");if("undefined"==typeof b)return console.error("value should be there to pop ");var d=_.get(this.options.data,a);return _.isArray(d)?void(_.includes(d,b)&&(_.pull(d,b),this.render(),c&&c())):console.error("values can only be poped in array")},ReactiveHbs.prototype.set=function(a,b,c){return"string"!=typeof a?console.error("parameter to set should be a string "):(_.set(this.options.data,a,b),this.runSubscribedFunctions(a),this.render(),void(c&&c()))},ReactiveHbs.prototype.setData=function(a,b){if("object"!=typeof a)throw new Error("to set data type shuld be an object");_.assign(this.options.data,a),this.render(),b&&b()},ReactiveHbs.prototype.runSubscribedFunctions=function(a,b){if(_.get(this.reactive,a)){var c=this;_.each(_.get(this.reactive,a),function(a){a(c)})}},ReactiveHbs.prototype.promises=function(a){return"object"!=typeof a?console.error("expected paramter is an object !"):void(this.tplPromises=a)},ReactiveHbs.prototype.executePromise=function(a,b){if("string"!=typeof a)return console.error("expected a string as a first parameter ");if("function"!=typeof b)return console.error("expected second parameter as a callback function ");var c=_.get(this.tplPromises,a);if("function"!=typeof c)return console.error("the promise you specified doesnot exist");var d=c();if(!d||!d.then||!d.catch)return console.error("function should return a promise ");var e=this;d.then(function(a){b(null,a,e)}).catch(function(a){b(a)})},ReactiveHbs.prototype.reactOnChange=function(a,b,c){if("string"!=typeof a)return console.error("attribute to run react on change should be a string type ");if("object"!=typeof b)return console.error("expected second paramter an object ");if("function"!=typeof c)return console.error("expected third parameter a function ");var d=c;return b&&b.debounce&&(d=_.debounce(c,b.debounce)),b&&b.throttle&&(d=_.throttle(c,b.throttle)),_.get(this.options.data,a)?void(_.get(this.reactive,a)?_.get(this.reactive,a).push(d):_.set(this.reactive,a,[d])):console.error("to bind observer key should be in template data object ")},ReactiveHbs.prototype.removeReactOnChange=function(a){return"string"!=typeof a?console.error("attribute to remove react on change should be a string type "):_.get(this.options.data,a)?void _.unset(this.reactive,a):console.error("to remove observer key should be in template data object ")};